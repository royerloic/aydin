py3.6 tests osx:
  tags:
    - osx
  script:
    - conda create -n ay36test python=3.6
    - conda activate ay36test
    - pip install -r requirements.txt
    - python -m pytest .
    - conda deactivate
    - conda env remove -n ay36test

py3.7 tests osx:
  tags:
    - osx
  script:
    - conda create -n ay37test python=3.7
    - conda activate ay37test
    - pip install -r requirements.txt
    - python -m pytest .
    - conda deactivate
    - conda env remove -n ay37test


black style osx:
  tags:
    - osx
  script:
    - conda create -n blacktest python=3.7
    - conda activate blacktest
    - pip install black
    - black --check -S -t py36 .
    - conda deactivate
    - conda env remove -n blacktest


unit tests windows:
  tags:
    - windows
  script:
    - pip install -r requirements.txt
    - python -m pytest .


unit tests linux:
  tags:
    - linux
  before_script:
    # - sudo apt-get install python-dev
    - export PATH=~/anaconda3/bin:$PATH
    - conda --version
    - conda create --name aydin python=3.6
    - source activate aydin
    - pip install -r requirements.txt
  script:
    - echo $CONDA_DEFAULT_ENV
    - source activate aydin
    - clinfo
    - python -m pytest .
    - conda deactivate
